<!-- Copyright (C) 2023-2025 anonymous

This file is part of PSFree.

PSFree is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

PSFree is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.

<html>
    <head>
        <meta charset='utf-8'>
        <title>PSFree-Lapse Exploit For 9.00</title>
        <style>
            @font-face {
                font-family: 'logging';
                src: url('fonts/LiberationMono-Regular.ttf');
            }
            #console {
                font-family: 'logging';
            }
            .container {
                overflow: hidden;
                content-visibility: auto;
                transform: translateZ(0);
                position: relative;
                width: 200px;
                height: 200px;
            }
            .child {
                width: 100px;
                height: 100px;
                position: absolute;
                top: 0;
                left: 0;
                background: blue;
                transform: translateZ(0);
            }
            button {
                margin-top: 20px;
                padding: 10px;
                font-size: 16px;
            }
            #status {
                margin-top: 10px;
                font-weight: bold;
            }
        </style>
    </head>
    <body>
        PSFree: A PS4/PS5 Exploit Chain<br>
        Donation (Monero/XMR):<br>
        86Fk3X9AE94EGKidzRbvyiVgGNYD3qZnuKNq1ZbsomFWXHYm6TtAgz9GNGitPWadkS3Wr9uXoT29U1SfdMtJ7QNKQpW1CVS<br>
        See <a href='./about.html' data-jslicense='1'>JavaScript license information</a> for the
        source code and license.<br>
        <button id="button">Trigger Exploit</button>
        <div id="status">Waiting...</div>
        <div class="container">
            <div class="child"></div>
        </div>
        <pre id='console'></pre>
    </body>
    <script src="payload.js"></script>
    <script>
        document.getElementById('button').addEventListener('click', () => {
            const status = document.getElementById('status');
            status.textContent = 'Loading exploit...';
            // Dynamically load alert.mjs
            import('./alert.mjs').then(module => {
                status.textContent = 'Running exploit...';
            }).catch(error => {
                status.textContent = 'Error: Failed to load exploit.';
                alert(`Failed to load alert.mjs: ${error.message}`);
            });
        });
    </script>
</html> -->

<html>
<head>
<style>

@keyframes keyframes {}

cite { animation: keyframes 100ms }

</style>
</head>
<body onload="main()">

<object type="image/png">
    <cite></cite>
    <dl hidden></dl>
</object>

<script>

if (window.testRunner)
    window.testRunner.dumpAsText();

const object = document.querySelector("object");
const cite = document.querySelector("cite");
const dl = document.querySelector("dl");

function main() {
    object.addEventListener("DOMSubtreeModified", subtreeModified);
    object.data = "x";
    cite.style.animationIterationCount = "infinite";
}

function subtreeModified() {
    const animation = cite.getAnimations()[0];
    object.width = "1em";
    object.codeBase;
    animation.effect = new KeyframeEffect(dl, { });
}

</script>
<p>PASS if this test doesn't crash</p>
</body>
</html>